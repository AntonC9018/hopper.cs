<# foreach (var method in ExportedMethods) { #>

public static void <#= method.Name #>HandlerAdapter(<#= method.ContextName #> ctx)
{
<#= method.AdapterBody() #>
}

        public static Handler<<#= method.ContextName #>> <#= method.Name #>Handler = new Handler<<#= method.ContextName #>>
        {
            handler = <#= method.Name #>HandlerAdapter
        };
<# if (method.IsDynamic) { #>
        public static HandlerWrapper<<#= method.ContextName #>> <#= method.Name #>HandlerWrapper = new HandlerWrapper<<#= method.ContextName #>>
        {
            chainPath = <#= method.Chain #>Path
        };
<# } #>
<# } #>
        public static void InitHandlers()
        {
            // for demo, set priority directly
<# foreach (var method in ExportedMethods) { #>
            <#= method.Name #>Handler.priority = (int)PriorityRank.<#= method.Priority #>;
<# if (method.IsDynamic) { #>
            <#= method.Name #>HandlerWrapper.handler = <#= method.Name #>Handler;
<# } #>
<# } #>
        }
